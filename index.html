<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rank Rush - Endless Ranking Game</title>
    <meta name="description" content="Test your knowledge with Rank Rush - the addictive ranking game. Order countries, movies, companies and more!">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Analytics - Replace GA_MEASUREMENT_ID with your actual ID -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    
    <style>
        /* Custom styles for mobile optimization */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            overflow-x: hidden;
            background: #ffffff;
            position: fixed;
            width: 100%;
            height: 100vh;
            height: 100dvh;
        }
        
        .mobile-optimized {
            touch-action: manipulation;
            -webkit-overflow-scrolling: touch;
            min-height: 100vh;
            min-height: 100dvh;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        /* Prevent zoom on double tap */
        * {
            touch-action: manipulation;
        }

        .no-scroll {
            overflow: hidden;
            position: fixed;
            width: 100%;
        }
        
        /* Enhanced drag and drop styles */
        .dragging {
            opacity: 0.9;
            transform: rotate(2deg) scale(1.15);
            z-index: 1000;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
            border: 3px solid #fbbf24 !important;
            background: linear-gradient(135deg, #fef3c7, #fbbf24) !important;
        }
        
        .drag-over {
            border: 2px dashed #1e40af !important;
            background: linear-gradient(135deg, #dbeafe, #bfdbfe) !important;
            transform: scale(1.02);
        }
        
        .drag-item {
            cursor: grab;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .drag-item::after {
            content: "â‹®â‹®";
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            font-size: 14px;
            line-height: 0.8;
            opacity: 0.7;
            pointer-events: none;
        }
        
        .drag-item:hover::after {
            color: #6b7280;
            opacity: 1;
        }
        
        .drag-item:active {
            cursor: grabbing;
        }
        
        .drag-placeholder {
            background: linear-gradient(135deg, #e0f2fe, #b3e5fc);
            border: 2px dashed #0288d1;
            opacity: 0.7;
        }
        
        /* Slot machine spinner animation */
        @keyframes slotSpin {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-100%);
            }
        }
        
        .slot-container {
            overflow: hidden;
            height: 120px;
            position: relative;
            border-radius: 12px;
            border: 3px solid #1e40af;
        }
        
        .slot-reel {
            animation: slotSpin 3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        .category-card {
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .category-card:last-child {
            border-bottom: none;
        }
        
        .category-card.selected {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.3);
            border-bottom-color: #d97706;
        }
        
        /* Items entrance animation */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .item-entrance {
            animation: slideInUp 0.4s ease forwards;
        }
    </style>
</head>
<body class="mobile-optimized">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide React icons as components
        const ChevronUp = () => (
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="18,15 12,9 6,15"></polyline>
            </svg>
        );
        
        const ChevronDown = () => (
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="6,9 12,15 18,9"></polyline>
            </svg>
        );
        
        const RotateCcw = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M1 4v6h6"></path>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
        );
        
        const CheckCircle = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22,4 12,14.01 9,11.01"></polyline>
            </svg>
        );

        const Zap = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="13,2 3,14 12,14 11,22 21,10 12,10 13,2"></polygon>
            </svg>
        );

        const gameCategories = {
            planetsByDistance: {
                title: "Planets by Distance from Sun",
                description: "Closest to farthest",
                icon: "ðŸª",
                items: [
                    { name: "Mercury", value: 1 },
                    { name: "Venus", value: 2 },
                    { name: "Earth", value: 3 },
                    { name: "Mars", value: 4 },
                    { name: "Jupiter", value: 5 },
                    { name: "Saturn", value: 6 },
                    { name: "Uranus", value: 7 },
                    { name: "Neptune", value: 8 }
                ]
            },
            countriesByPopulation: {
                title: "Countries by Population",
                description: "Most to least populated",
                icon: "ðŸŒ",
                items: [
                    { name: "China", value: 1412000000 },
                    { name: "India", value: 1408000000 },
                    { name: "United States", value: 333000000 },
                    { name: "Indonesia", value: 275000000 },
                    { name: "Pakistan", value: 231000000 },
                    { name: "Nigeria", value: 218000000 },
                    { name: "Brazil", value: 215000000 },
                    { name: "Bangladesh", value: 169000000 },
                    { name: "Russia", value: 146000000 },
                    { name: "Mexico", value: 128000000 },
                    { name: "Ethiopia", value: 120000000 },
                    { name: "Japan", value: 125000000 },
                    { name: "Philippines", value: 110000000 },
                    { name: "Egypt", value: 104000000 },
                    { name: "Vietnam", value: 97000000 },
                    { name: "Turkey", value: 84000000 },
                    { name: "Iran", value: 84000000 },
                    { name: "Germany", value: 83000000 }
                ]
            },
            usStatesByArea: {
                title: "US States by Area",
                description: "Largest to smallest",
                icon: "ðŸ—ºï¸",
                items: [
                    { name: "Alaska", value: 663300 },
                    { name: "Texas", value: 268596 },
                    { name: "California", value: 163695 },
                    { name: "Montana", value: 147040 },
                    { name: "New Mexico", value: 121590 },
                    { name: "Arizona", value: 113990 },
                    { name: "Nevada", value: 110572 },
                    { name: "Colorado", value: 104094 },
                    { name: "Oregon", value: 98379 },
                    { name: "Wyoming", value: 97813 },
                    { name: "Michigan", value: 96714 },
                    { name: "Minnesota", value: 86936 },
                    { name: "Utah", value: 84897 },
                    { name: "Idaho", value: 83569 },
                    { name: "Kansas", value: 82278 }
                ]
            },
            moviesByBoxOffice: {
                title: "Movies by Box Office",
                description: "Highest to lowest grossing",
                icon: "ðŸŽ¬",
                items: [
                    { name: "Avatar (2009)", value: 2923706026 },
                    { name: "Avengers: Endgame", value: 2797501328 },
                    { name: "Avatar: The Way of Water", value: 2320250281 },
                    { name: "Titanic", value: 2257844554 },
                    { name: "Star Wars: The Force Awakens", value: 2071310218 },
                    { name: "Avengers: Infinity War", value: 2048359754 },
                    { name: "Spider-Man: No Way Home", value: 1921847111 },
                    { name: "Jurassic World", value: 1672319444 },
                    { name: "The Lion King (2019)", value: 1656943394 },
                    { name: "The Avengers", value: 1518815515 },
                    { name: "Furious 7", value: 1515341399 },
                    { name: "Top Gun: Maverick", value: 1488732821 },
                    { name: "Jurassic World", value: 1672319444 },
                    { name: "The Lion King (2019)", value: 1656943394 },
                    { name: "The Avengers", value: 1518815515 },
                    { name: "Furious 7", value: 1515341399 },
                    { name: "Top Gun: Maverick", value: 1488732821 }
                ]
            },
            stocksByMarketCap: {
                title: "Companies by Market Cap",
                description: "Most to least valuable",
                icon: "ðŸ’¼",
                items: [
                    { name: "Microsoft", value: 3000000000000 },
                    { name: "Apple", value: 2900000000000 },
                    { name: "Nvidia", value: 2200000000000 },
                    { name: "Alphabet (Google)", value: 2000000000000 },
                    { name: "Amazon", value: 1500000000000 },
                    { name: "Meta (Facebook)", value: 1200000000000 },
                    { name: "Tesla", value: 800000000000 },
                    { name: "Berkshire Hathaway", value: 780000000000 },
                    { name: "Taiwan Semiconductor", value: 500000000000 },
                    { name: "Walmart", value: 480000000000 }
                ]
            },
            elementsById: {
                title: "Elements by Atomic Number",
                description: "Lowest to highest number",
                icon: "âš›ï¸",
                items: [
                    { name: "Hydrogen", value: 1 },
                    { name: "Helium", value: 2 },
                    { name: "Lithium", value: 3 },
                    { name: "Beryllium", value: 4 },
                    { name: "Boron", value: 5 },
                    { name: "Carbon", value: 6 },
                    { name: "Nitrogen", value: 7 },
                    { name: "Oxygen", value: 8 },
                    { name: "Fluorine", value: 9 },
                    { name: "Neon", value: 10 },
                    { name: "Sodium", value: 11 },
                    { name: "Magnesium", value: 12 }
                ]
            },
            fastFoodChains: {
                title: "Fast Food by Revenue",
                description: "Highest to lowest revenue",
                icon: "ðŸ”",
                items: [
                    { name: "Starbucks", value: 32250000000 },
                    { name: "KFC", value: 27000000000 },
                    { name: "McDonald's", value: 23223000000 },
                    { name: "Domino's", value: 17800000000 },
                    { name: "Subway", value: 16100000000 },
                    { name: "Pizza Hut", value: 12000000000 },
                    { name: "Taco Bell", value: 11300000000 },
                    { name: "Burger King", value: 10200000000 },
                    { name: "Dunkin'", value: 9200000000 }
                ]
            },
            nbaTeamsByChampionships: {
                title: "NBA Teams by Championships",
                description: "Most to least titles",
                icon: "ðŸ€",
                items: [
                    { name: "Boston Celtics", value: 18 },
                    { name: "Los Angeles Lakers", value: 17 },
                    { name: "Golden State Warriors", value: 7 },
                    { name: "Chicago Bulls", value: 6 },
                    { name: "San Antonio Spurs", value: 5 },
                    { name: "Philadelphia 76ers", value: 3 },
                    { name: "Detroit Pistons", value: 3 },
                    { name: "Miami Heat", value: 3 },
                    { name: "New York Knicks", value: 2 },
                    { name: "Houston Rockets", value: 2 },
                    { name: "Milwaukee Bucks", value: 2 }
                ]
            },
            techByFounded: {
                title: "Tech Companies by Founding",
                description: "Oldest to newest",
                icon: "ðŸ’»",
                items: [
                    { name: "IBM", value: 1911 },
                    { name: "HP", value: 1939 },
                    { name: "Intel", value: 1968 },
                    { name: "Microsoft", value: 1975 },
                    { name: "Apple", value: 1976 },
                    { name: "Oracle", value: 1977 },
                    { name: "Adobe", value: 1982 },
                    { name: "Dell", value: 1984 },
                    { name: "Cisco", value: 1984 },
                    { name: "Netflix", value: 1997 },
                    { name: "Google", value: 1998 },
                    { name: "PayPal", value: 1998 },
                    { name: "Salesforce", value: 1999 },
                    { name: "Tesla", value: 2003 },
                    { name: "Facebook", value: 2004 },
                    { name: "YouTube", value: 2005 },
                    { name: "Twitter", value: 2006 },
                    { name: "Uber", value: 2009 },
                    { name: "Instagram", value: 2010 },
                    { name: "Snapchat", value: 2011 },
                    { name: "TikTok", value: 2016 }
                ]
            },
            oceansByDepth: {
                title: "Ocean Trenches by Depth",
                description: "Deepest to shallowest",
                icon: "ðŸŒŠ",
                items: [
                    { name: "Mariana Trench", value: 11034 },
                    { name: "Tonga Trench", value: 10882 },
                    { name: "Kuril-Kamchatka Trench", value: 10542 },
                    { name: "Philippines Trench", value: 10540 },
                    { name: "Kermadec Trench", value: 10047 },
                    { name: "Izu-Ogasawara Trench", value: 9780 },
                    { name: "Puerto Rico Trench", value: 8648 }
                ]
            },
            spicesByHeat: {
                title: "Peppers by Heat Level",
                description: "Hottest to mildest",
                icon: "ðŸŒ¶ï¸",
                items: [
                    { name: "Carolina Reaper", value: 2200000 },
                    { name: "Trinidad Moruga Scorpion", value: 2009231 },
                    { name: "Ghost Pepper", value: 1041427 },
                    { name: "Habanero", value: 350000 },
                    { name: "Cayenne", value: 50000 },
                    { name: "JalapeÃ±o", value: 8000 },
                    { name: "Poblano", value: 2000 },
                    { name: "Bell Pepper", value: 0 }
                ]
            },
            usPresidentsByOrder: {
                title: "US Presidents by Term Order",
                description: "1st to most recent",
                icon: "ðŸ‡ºðŸ‡¸",
                items: [
                    { name: "George Washington", value: 1 },
                    { name: "John Adams", value: 2 },
                    { name: "Thomas Jefferson", value: 3 },
                    { name: "James Madison", value: 4 },
                    { name: "James Monroe", value: 5 },
                    { name: "John Quincy Adams", value: 6 },
                    { name: "Andrew Jackson", value: 7 },
                    { name: "Abraham Lincoln", value: 16 },
                    { name: "Theodore Roosevelt", value: 26 },
                    { name: "Franklin D. Roosevelt", value: 32 },
                    { name: "John F. Kennedy", value: 35 },
                    { name: "Ronald Reagan", value: 40 },
                    { name: "Barack Obama", value: 44 },
                    { name: "Donald Trump", value: 45 },
                    { name: "Joe Biden", value: 46 }
                ]
            },
            usStatesByStatehood: {
                title: "US States by Statehood Date",
                description: "Oldest to newest",
                icon: "ðŸ›ï¸",
                items: [
                    { name: "Delaware", value: 1787 },
                    { name: "Pennsylvania", value: 1787 },
                    { name: "New Jersey", value: 1787 },
                    { name: "Georgia", value: 1788 },
                    { name: "Connecticut", value: 1788 },
                    { name: "Massachusetts", value: 1788 },
                    { name: "Maryland", value: 1788 },
                    { name: "South Carolina", value: 1788 },
                    { name: "New Hampshire", value: 1788 },
                    { name: "Virginia", value: 1788 },
                    { name: "New York", value: 1788 },
                    { name: "North Carolina", value: 1789 },
                    { name: "Rhode Island", value: 1790 },
                    { name: "Vermont", value: 1791 },
                    { name: "Kentucky", value: 1792 },
                    { name: "Tennessee", value: 1796 },
                    { name: "Ohio", value: 1803 },
                    { name: "California", value: 1850 },
                    { name: "Alaska", value: 1959 },
                    { name: "Hawaii", value: 1959 }
                ]
            },
            majorWarsStartDate: {
                title: "Major US Wars by Start Date",
                description: "Oldest to most recent",
                icon: "âš”ï¸",
                items: [
                    { name: "Revolutionary War", value: 1775 },
                    { name: "War of 1812", value: 1812 },
                    { name: "Mexican-American War", value: 1846 },
                    { name: "Civil War", value: 1861 },
                    { name: "Spanish-American War", value: 1898 },
                    { name: "World War I", value: 1917 },
                    { name: "World War II", value: 1941 },
                    { name: "Korean War", value: 1950 },
                    { name: "Vietnam War", value: 1964 },
                    { name: "Gulf War", value: 1991 },
                    { name: "Afghanistan War", value: 2001 },
                    { name: "Iraq War", value: 2003 }
                ]
            },
            disneyMoviesByYear: {
                title: "Disney Animated Movies by Release",
                description: "Oldest to newest",
                icon: "ðŸ°",
                items: [
                    { name: "Snow White and the Seven Dwarfs", value: 1937 },
                    { name: "Pinocchio", value: 1940 },
                    { name: "Cinderella", value: 1950 },
                    { name: "Sleeping Beauty", value: 1959 },
                    { name: "The Little Mermaid", value: 1989 },
                    { name: "Beauty and the Beast", value: 1991 },
                    { name: "The Lion King", value: 1994 },
                    { name: "Toy Story", value: 1995 },
                    { name: "Mulan", value: 1998 },
                    { name: "Finding Nemo", value: 2003 },
                    { name: "Frozen", value: 2013 },
                    { name: "Moana", value: 2016 },
                    { name: "Encanto", value: 2021 }
                ]
            },
            gameConsolesByRelease: {
                title: "Game Consoles by Release Date",
                description: "Oldest to newest",
                icon: "ðŸŽ®",
                items: [
                    { name: "Atari 2600", value: 1977 },
                    { name: "Nintendo Entertainment System", value: 1985 },
                    { name: "Game Boy", value: 1989 },
                    { name: "Super Nintendo", value: 1991 },
                    { name: "PlayStation", value: 1995 },
                    { name: "Nintendo 64", value: 1996 },
                    { name: "PlayStation 2", value: 2000 },
                    { name: "Xbox", value: 2001 },
                    { name: "Nintendo Wii", value: 2006 },
                    { name: "PlayStation 4", value: 2013 },
                    { name: "Nintendo Switch", value: 2017 },
                    { name: "PlayStation 5", value: 2020 }
                ]
            },
            marvelMoviesMCU: {
                title: "Marvel MCU Movies by Release",
                description: "Release order (Phase 1-4)",
                icon: "ðŸ¦¸",
                items: [
                    { name: "Iron Man", value: 1 },
                    { name: "The Incredible Hulk", value: 2 },
                    { name: "Iron Man 2", value: 3 },
                    { name: "Thor", value: 4 },
                    { name: "Captain America: The First Avenger", value: 5 },
                    { name: "The Avengers", value: 6 },
                    { name: "Guardians of the Galaxy", value: 10 },
                    { name: "Avengers: Age of Ultron", value: 11 },
                    { name: "Captain America: Civil War", value: 13 },
                    { name: "Black Panther", value: 18 },
                    { name: "Avengers: Infinity War", value: 19 },
                    { name: "Avengers: Endgame", value: 22 },
                    { name: "Spider-Man: Far From Home", value: 23 }
                ]
            },
            videoGamesBySales: {
                title: "Video Games by Total Sales",
                description: "Highest to lowest sales",
                icon: "ðŸ•¹ï¸",
                items: [
                    { name: "Minecraft", value: 300000000 },
                    { name: "Grand Theft Auto V", value: 190000000 },
                    { name: "Tetris (all versions)", value: 170000000 },
                    { name: "Wii Sports", value: 82900000 },
                    { name: "PUBG", value: 75000000 },
                    { name: "Mario Kart 8 / Deluxe", value: 70000000 },
                    { name: "Super Mario Bros.", value: 58000000 },
                    { name: "Red Dead Redemption 2", value: 50000000 },
                    { name: "Overwatch", value: 50000000 },
                    { name: "The Witcher 3", value: 40000000 },
                    { name: "Animal Crossing: New Horizons", value: 42000000 }
                ]
            },
            romanNumeralsByValue: {
                title: "Roman Numerals by Value",
                description: "Smallest to largest",
                icon: "ðŸ›ï¸",
                items: [
                    { name: "I", value: 1 },
                    { name: "II", value: 2 },
                    { name: "III", value: 3 },
                    { name: "IV", value: 4 },
                    { name: "V", value: 5 },
                    { name: "VI", value: 6 },
                    { name: "IX", value: 9 },
                    { name: "X", value: 10 },
                    { name: "L", value: 50 },
                    { name: "C", value: 100 },
                    { name: "D", value: 500 },
                    { name: "M", value: 1000 }
                ]
            },
            cookingMeasurements: {
                title: "Cooking Measurements by Size",
                description: "Smallest to largest",
                icon: "ðŸ¥„",
                items: [
                    { name: "1/4 teaspoon", value: 0.25 },
                    { name: "1/2 teaspoon", value: 0.5 },
                    { name: "1 teaspoon", value: 1 },
                    { name: "1 tablespoon", value: 3 },
                    { name: "1/4 cup", value: 12 },
                    { name: "1/3 cup", value: 16 },
                    { name: "1/2 cup", value: 24 },
                    { name: "1 cup", value: 48 },
                    { name: "1 pint", value: 96 },
                    { name: "1 quart", value: 192 },
                    { name: "1 gallon", value: 768 }
                ]
            },
            planetsBySize: {
                title: "Planets by Diameter",
                description: "Smallest to largest",
                icon: "ðŸª",
                items: [
                    { name: "Mercury", value: 4879 },
                    { name: "Mars", value: 6779 },
                    { name: "Venus", value: 12104 },
                    { name: "Earth", value: 12756 },
                    { name: "Neptune", value: 49528 },
                    { name: "Uranus", value: 51118 },
                    { name: "Saturn", value: 120536 },
                    { name: "Jupiter", value: 142984 }
                ]
            },
            elementsDiscoveryYear: {
                title: "Chemical Elements by Discovery",
                description: "Oldest to most recent",
                icon: "âš›ï¸",
                items: [
                    { name: "Gold", value: -3000 },
                    { name: "Silver", value: -3000 },
                    { name: "Iron", value: -1500 },
                    { name: "Phosphorus", value: 1669 },
                    { name: "Oxygen", value: 1774 },
                    { name: "Uranium", value: 1789 },
                    { name: "Aluminum", value: 1825 },
                    { name: "Helium", value: 1868 },
                    { name: "Radium", value: 1898 },
                    { name: "Plutonium", value: 1940 },
                    { name: "Einsteinium", value: 1952 },
                    { name: "Oganesson", value: 2002 }
                ]
            },
            socialMediaPlatforms: {
                title: "Social Media by Launch Date",
                description: "Oldest to newest",
                icon: "ðŸ“±",
                items: [
                    { name: "Six Degrees", value: 1997 },
                    { name: "Friendster", value: 2002 },
                    { name: "MySpace", value: 2003 },
                    { name: "Facebook", value: 2004 },
                    { name: "YouTube", value: 2005 },
                    { name: "Twitter", value: 2006 },
                    { name: "Instagram", value: 2010 },
                    { name: "Snapchat", value: 2011 },
                    { name: "TikTok", value: 2016 },
                    { name: "Discord", value: 2015 },
                    { name: "Clubhouse", value: 2020 },
                    { name: "BeReal", value: 2020 }
                ]
            },
            iPhoneModels: {
                title: "iPhone Models by Release Year",
                description: "Oldest to newest",
                icon: "ðŸ“±",
                items: [
                    { name: "Original iPhone", value: 2007 },
                    { name: "iPhone 3G", value: 2008 },
                    { name: "iPhone 3GS", value: 2009 },
                    { name: "iPhone 4", value: 2010 },
                    { name: "iPhone 4S", value: 2011 },
                    { name: "iPhone 5", value: 2012 },
                    { name: "iPhone 5S", value: 2013 },
                    { name: "iPhone 6", value: 2014 },
                    { name: "iPhone 7", value: 2016 },
                    { name: "iPhone X", value: 2017 },
                    { name: "iPhone 12", value: 2020 },
                    { name: "iPhone 14", value: 2022 },
                    { name: "iPhone 15", value: 2023 }
                ]
            },
            streamingServices: {
                title: "Streaming Services by Launch",
                description: "Oldest to newest",
                icon: "ðŸ“º",
                items: [
                    { name: "Netflix (streaming)", value: 2007 },
                    { name: "Hulu", value: 2008 },
                    { name: "Amazon Prime Video", value: 2011 },
                    { name: "HBO Go", value: 2012 },
                    { name: "Sling TV", value: 2015 },
                    { name: "YouTube TV", value: 2017 },
                    { name: "Disney+", value: 2019 },
                    { name: "Apple TV+", value: 2019 },
                    { name: "HBO Max", value: 2020 },
                    { name: "Peacock", value: 2020 },
                    { name: "Paramount+", value: 2021 }
                ]
            },
            nationalParksEstablished: {
                title: "US National Parks by Establishment",
                description: "Oldest to newest",
                icon: "ðŸžï¸",
                items: [
                    { name: "Yellowstone", value: 1872 },
                    { name: "Sequoia", value: 1890 },
                    { name: "Yosemite", value: 1890 },
                    { name: "Mount Rainier", value: 1899 },
                    { name: "Crater Lake", value: 1902 },
                    { name: "Grand Canyon", value: 1919 },
                    { name: "Zion", value: 1919 },
                    { name: "Bryce Canyon", value: 1928 },
                    { name: "Great Smoky Mountains", value: 1934 },
                    { name: "Everglades", value: 1947 },
                    { name: "Arches", value: 1971 },
                    { name: "Death Valley", value: 1994 },
                    { name: "Jurassic World", value: 1672319444 },
                    { name: "The Lion King (2019)", value: 1656943394 },
                    { name: "The Avengers", value: 1518815515 },
                    { name: "Furious 7", value: 1515341399 },
                    { name: "Top Gun: Maverick", value: 1488732821 }
                ]
            },
            stocksByMarketCap: {
                title: "Companies by Market Cap",
                description: "Most to least valuable",
                icon: "ðŸ’¼",
                items: [
                    { name: "Microsoft", value: 3000000000000 },
                    { name: "Apple", value: 2900000000000 },
                    { name: "Nvidia", value: 2200000000000 },
                    { name: "Alphabet (Google)", value: 2000000000000 },
                    { name: "Amazon", value: 1500000000000 },
                    { name: "Meta (Facebook)", value: 1200000000000 },
                    { name: "Tesla", value: 800000000000 },
                    { name: "Berkshire Hathaway", value: 780000000000 },
                    { name: "Taiwan Semiconductor", value: 500000000000 },
                    { name: "Walmart", value: 480000000000 }
                ]
            },
            elementsById: {
                title: "Elements by Atomic Number",
                description: "Lowest to highest number",
                icon: "âš›ï¸",
                items: [
                    { name: "Hydrogen", value: 1 },
                    { name: "Helium", value: 2 },
                    { name: "Lithium", value: 3 },
                    { name: "Beryllium", value: 4 },
                    { name: "Boron", value: 5 },
                    { name: "Carbon", value: 6 },
                    { name: "Nitrogen", value: 7 },
                    { name: "Oxygen", value: 8 },
                    { name: "Fluorine", value: 9 },
                    { name: "Neon", value: 10 },
                    { name: "Sodium", value: 11 },
                    { name: "Magnesium", value: 12 }
                ]
            },
            fastFoodChains: {
                title: "Fast Food by Revenue",
                description: "Highest to lowest revenue",
                icon: "ðŸ”",
                items: [
                    { name: "Starbucks", value: 32250000000 },
                    { name: "KFC", value: 27000000000 },
                    { name: "McDonald's", value: 23223000000 },
                    { name: "Domino's", value: 17800000000 },
                    { name: "Subway", value: 16100000000 },
                    { name: "Pizza Hut", value: 12000000000 },
                    { name: "Taco Bell", value: 11300000000 },
                    { name: "Burger King", value: 10200000000 },
                    { name: "Dunkin'", value: 9200000000 }
                ]
            },
            nbaTeamsByChampionships: {
                title: "NBA Teams by Championships",
                description: "Most to least titles",
                icon: "ðŸ€",
                items: [
                    { name: "Boston Celtics", value: 18 },
                    { name: "Los Angeles Lakers", value: 17 },
                    { name: "Golden State Warriors", value: 7 },
                    { name: "Chicago Bulls", value: 6 },
                    { name: "San Antonio Spurs", value: 5 },
                    { name: "Philadelphia 76ers", value: 3 },
                    { name: "Detroit Pistons", value: 3 },
                    { name: "Miami Heat", value: 3 },
                    { name: "New York Knicks", value: 2 },
                    { name: "Houston Rockets", value: 2 },
                    { name: "Milwaukee Bucks", value: 2 }
                ]
            },
            techByFounded: {
                title: "Tech Companies by Founding",
                description: "Oldest to newest",
                icon: "ðŸ’»",
                items: [
                    { name: "IBM", value: 1911 },
                    { name: "HP", value: 1939 },
                    { name: "Intel", value: 1968 },
                    { name: "Microsoft", value: 1975 },
                    { name: "Apple", value: 1976 },
                    { name: "Oracle", value: 1977 },
                    { name: "Adobe", value: 1982 },
                    { name: "Dell", value: 1984 },
                    { name: "Cisco", value: 1984 },
                    { name: "Netflix", value: 1997 },
                    { name: "Google", value: 1998 },
                    { name: "PayPal", value: 1998 },
                    { name: "Salesforce", value: 1999 },
                    { name: "Tesla", value: 2003 },
                    { name: "Facebook", value: 2004 },
                    { name: "YouTube", value: 2005 },
                    { name: "Twitter", value: 2006 },
                    { name: "Uber", value: 2009 },
                    { name: "Instagram", value: 2010 },
                    { name: "Snapchat", value: 2011 },
                    { name: "TikTok", value: 2016 }
                ]
            },
            oceansByDepth: {
                title: "Ocean Trenches by Depth",
                description: "Deepest to shallowest",
                icon: "ðŸŒŠ",
                items: [
                    { name: "Mariana Trench", value: 11034 },
                    { name: "Tonga Trench", value: 10882 },
                    { name: "Kuril-Kamchatka Trench", value: 10542 },
                    { name: "Philippines Trench", value: 10540 },
                    { name: "Kermadec Trench", value: 10047 },
                    { name: "Izu-Ogasawara Trench", value: 9780 },
                    { name: "Puerto Rico Trench", value: 8648 }
                ]
            },
            spicesByHeat: {
                title: "Peppers by Heat Level",
                description: "Hottest to mildest",
                icon: "ðŸŒ¶ï¸",
                items: [
                    { name: "Carolina Reaper", value: 2200000 },
                    { name: "Trinidad Moruga Scorpion", value: 2009231 },
                    { name: "Ghost Pepper", value: 1041427 },
                    { name: "Habanero", value: 350000 },
                    { name: "Cayenne", value: 50000 },
                    { name: "JalapeÃ±o", value: 8000 },
                    { name: "Poblano", value: 2000 },
                    { name: "Bell Pepper", value: 0 }
                ]
            }
        };

        const RankRushGame = () => {
            const [currentCategory, setCurrentCategory] = useState(null);
            const [items, setItems] = useState([]);
            const [gameState, setGameState] = useState('ready'); // ready, spinning, playing, finished, hailMary, gameOver
            const [points, setPoints] = useState(50);
            const [roundScore, setRoundScore] = useState(0);
            const [showResults, setShowResults] = useState(false);
            const [draggedItem, setDraggedItem] = useState(null);
            const [dragOverIndex, setDragOverIndex] = useState(null);
            const [touchStartY, setTouchStartY] = useState(null);
            const [isDragging, setIsDragging] = useState(false);
            const [isHailMary, setIsHailMary] = useState(false);
            const [bonuses, setBonuses] = useState([]);
            const [selectedCategoryIndex, setSelectedCategoryIndex] = useState(0);

            useEffect(() => {
                // Track analytics
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'game_start', {
                        'custom_parameter': 'rank_rush'
                    });
                }
            }, []);

            const spinWheel = () => {
                if (points < 10 && !isHailMary) {
                    // Trigger Hail Mary
                    setIsHailMary(true);
                    setGameState('spinning');
                    startSpinAnimation();
                    return;
                }
                
                if (!isHailMary) {
                    setPoints(points - 10); // Cost to spin
                }
                
                setGameState('spinning');
                startSpinAnimation();
            };

            const startSpinAnimation = () => {
                // Animate slot machine for 3 seconds
                const categoryKeys = Object.keys(gameCategories);
                const finalCategoryIndex = Math.floor(Math.random() * categoryKeys.length);
                const finalCategory = categoryKeys[finalCategoryIndex];
                
                // Set the final selected index for the animation to land on
                setSelectedCategoryIndex(finalCategoryIndex);
                
                setTimeout(() => {
                    setCurrentCategory(finalCategory);
                    initializeRound(finalCategory);
                }, 3000);
            };

            const initializeRound = (categoryKey) => {
                const category = gameCategories[categoryKey];
                
                // Pick 5 random items from the category
                const shuffledItems = [...category.items].sort(() => Math.random() - 0.5);
                const selectedItems = shuffledItems.slice(0, 5);
                
                // Determine correct order based on category
                const isDescending = [
                    'countriesByPopulation', 'moviesByBoxOffice', 'stocksByMarketCap',
                    'fastFoodChains', 'nbaTeamsByChampionships', 'oceansByDepth', 'spicesByHeat', 'usStatesByArea'
                ].includes(categoryKey);
                
                const sortedItems = [...selectedItems].sort((a, b) => {
                    return isDescending ? b.value - a.value : a.value - b.value;
                });
                
                // Assign correct order and shuffle for display
                const itemsWithOrder = sortedItems.map((item, index) => ({
                    ...item,
                    correctOrder: index + 1
                }));
                
                const shuffledForDisplay = [...itemsWithOrder].sort(() => Math.random() - 0.5);
                
                setItems(shuffledForDisplay.map((item, index) => ({ ...item, currentOrder: index + 1 })));
                setGameState('playing');
                setRoundScore(0);
                setShowResults(false);
                setBonuses([]);
            };

            const moveItem = (fromIndex, toIndex) => {
                const newItems = [...items];
                const [movedItem] = newItems.splice(fromIndex, 1);
                newItems.splice(toIndex, 0, movedItem);
                
                newItems.forEach((item, idx) => {
                    item.currentOrder = idx + 1;
                });
                setItems(newItems);
            };

            // Enhanced touch handlers for mobile
            const handleTouchStart = (e, index) => {
                if (gameState !== 'playing') return;
                
                const touch = e.touches[0];
                setTouchStartY(touch.clientY);
                setDraggedItem(index);
                setIsDragging(false);
                
                // Enhanced visual feedback
                e.currentTarget.style.transform = 'scale(1.1) rotate(1deg)';
                e.currentTarget.style.zIndex = '1000';
                e.currentTarget.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.2)';
                e.currentTarget.style.border = '2px solid #fbbf24';
                
                // Add haptic feedback if available
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
            };

            const handleTouchMove = (e, index) => {
                if (gameState !== 'playing' || draggedItem === null) return;
                
                const touch = e.touches[0];
                const deltaY = touch.clientY - touchStartY;
                
                if (Math.abs(deltaY) > 15 && !isDragging) {
                    setIsDragging(true);
                    lockScroll();
                    
                    // Add visual feedback to other items
                    items.forEach((_, idx) => {
                        const element = document.querySelector(`[data-item-index="${idx}"]`);
                        if (element && idx !== index) {
                            element.style.opacity = '0.6';
                            element.style.background = 'linear-gradient(135deg, #f3f4f6, #e5e7eb)';
                        }
                    });
                }
                
                if (isDragging) {
                    e.preventDefault();
                    
                    // Enhanced dragging visual feedback
                    e.currentTarget.style.transform = `translateY(${deltaY}px) scale(1.15) rotate(2deg)`;
                    e.currentTarget.style.opacity = '0.9';
                    e.currentTarget.style.background = 'linear-gradient(135deg, #fef3c7, #fbbf24)';
                    
                    // Calculate and highlight drop zones
                    const itemHeight = 40;
                    const newIndex = Math.max(0, Math.min(items.length - 1, index + Math.round(deltaY / itemHeight)));
                    
                    if (newIndex !== dragOverIndex) {
                        // Clear previous highlights
                        items.forEach((_, idx) => {
                            const element = document.querySelector(`[data-item-index="${idx}"]`);
                            if (element && idx !== index) {
                                element.classList.remove('drag-over');
                            }
                        });
                        
                        // Highlight new drop zone
                        if (newIndex !== index) {
                            const targetElement = document.querySelector(`[data-item-index="${newIndex}"]`);
                            if (targetElement) {
                                targetElement.classList.add('drag-over');
                            }
                        }
                        
                        setDragOverIndex(newIndex);
                    }
                }
            };

            const handleTouchEnd = (e, index) => {
                if (gameState !== 'playing') return;
                
                // Reset visual feedback for dragged item
                e.currentTarget.style.transform = '';
                e.currentTarget.style.opacity = '';
                e.currentTarget.style.zIndex = '';
                e.currentTarget.style.boxShadow = '';
                e.currentTarget.style.border = '';
                e.currentTarget.style.background = '';
                
                // Reset visual feedback for all other items
                items.forEach((_, idx) => {
                    const element = document.querySelector(`[data-item-index="${idx}"]`);
                    if (element && idx !== index) {
                        element.style.opacity = '';
                        element.style.background = '';
                        element.classList.remove('drag-over');
                    }
                });
                
                if (isDragging && dragOverIndex !== null && dragOverIndex !== index) {
                    moveItem(index, dragOverIndex);
                    
                    // Success feedback
                    if (navigator.vibrate) {
                        navigator.vibrate(100);
                    }
                }
                
                setTouchStartY(null);
                setDraggedItem(null);
                setDragOverIndex(null);
                setIsDragging(false);
                unlockScroll(); 
            };

            const handleDragStart = (e, index) => {
                lockScroll();
                setDraggedItem(index);
                e.dataTransfer.effectAllowed = 'move';
                setTimeout(() => {
                    e.target.classList.add('dragging');
                }, 0);
            };

            const handleDragEnd = (e) => {
                e.target.classList.remove('dragging');
                setDraggedItem(null);
                setDragOverIndex(null);
                unlockScroll();
            };

            const lockScroll = () => {
                document.body.classList.add('no-scroll');
            };
            
            const unlockScroll = () => {
                document.body.classList.remove('no-scroll');
            };

            const handleDragOver = (e) => {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            };

            const handleDragEnter = (e, index) => {
                e.preventDefault();
                setDragOverIndex(index);
            };

            const handleDragLeave = (e) => {
                if (!e.currentTarget.contains(e.relatedTarget)) {
                    setDragOverIndex(null);
                }
            };

            const handleDrop = (e, dropIndex) => {
                e.preventDefault();
                e.target.classList.remove('drag-over');
                
                if (draggedItem !== null && draggedItem !== dropIndex) {
                    moveItem(draggedItem, dropIndex);
                }
                
                setDraggedItem(null);
                setDragOverIndex(null);
            };

            const moveItemWithArrow = (index, direction) => {
                const targetIndex = direction === 'up' ? index - 1 : index + 1;
                if (targetIndex >= 0 && targetIndex < items.length) {
                    moveItem(index, targetIndex);
                }
            };

            const calculateScore = () => {
                let score = 0;
                let earnedBonuses = [];
                let correctPositions = 0;
                
                items.forEach((item, index) => {
                    const currentPos = index + 1;
                    const correctPos = item.correctOrder;
                    
                    if (currentPos === correctPos) {
                        correctPositions++;
                        
                        // Top and bottom items are worth 10 points
                        if (correctPos === 1) {
                            score += 10;
                            earnedBonuses.push('Top Position! +10');
                        } else if (correctPos === 5) {
                            score += 10;
                            earnedBonuses.push('Bottom Position! +10');
                        } else {
                            // Middle items worth 5-15 points (random)
                            const middlePoints = 5 + Math.floor(Math.random() * 11);
                            score += middlePoints;
                            earnedBonuses.push(`Middle Position! +${middlePoints}`);
                        }
                    }
                });
                
                // Perfect round bonus
                if (correctPositions === 5) {
                    score += 25;
                    earnedBonuses.push('Perfect Round! +25');
                }
                
                return { score, bonuses: earnedBonuses, correctCount: correctPositions };
            };

            const finishRound = () => {
                const result = calculateScore();
                setRoundScore(result.score);
                setBonuses(result.bonuses);
                
                if (isHailMary) {
                    if (result.correctCount === 5) {
                        // Hail Mary success
                        setPoints(30);
                        setIsHailMary(false);
                        setBonuses([...result.bonuses, 'Hail Mary Success! +30 points']);
                    } else {
                        // Game over
                        setGameState('gameOver');
                        setShowResults(true);
                        return;
                    }
                } else {
                    setPoints(points + result.score);
                }
                
                setGameState('finished');
                setShowResults(true);
                
                // Track analytics
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'round_complete', {
                        'score': result.score,
                        'correct_answers': result.correctCount,
                        'category': currentCategory,
                        'is_hail_mary': isHailMary
                    });
                }
            };

            const nextRound = () => {
                setGameState('ready');
                setCurrentCategory(null);
                setItems([]);
                setShowResults(false);
            };

            const resetGame = () => {
                setPoints(50);
                setIsHailMary(false);
                setGameState('ready');
                setCurrentCategory(null);
                setItems([]);
                setShowResults(false);
                setRoundScore(0);
                setBonuses([]);
                
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'game_reset');
                }
            };

            const getItemResult = (item, index) => {
                const currentPos = index + 1;
                const correctPos = item.correctOrder;
                const distance = Math.abs(currentPos - correctPos);
                
                if (distance === 0) return { status: 'perfect', color: 'bg-green-100 border-green-500 text-green-800' };
                if (distance === 1) return { status: 'close', color: 'bg-yellow-100 border-yellow-500 text-yellow-800' };
                return { status: 'off', color: 'bg-red-100 border-red-500 text-red-800' };
            };

            const canSpin = () => {
                return gameState === 'ready' && (points >= 10 || (points < 10 && !isHailMary));
            };

            return (
                <div className="max-w-xs mx-auto bg-white text-gray-900 mobile-optimized min-h-screen">
                    {/* Header */}
                    <div className="bg-gradient-to-r from-blue-900 to-blue-800 text-white p-3">
                        <div className="flex justify-between items-center mb-2">
                            <h1 className="text-xl font-bold">Rank Rush</h1>
                            <div className="text-right">
                                <div className="text-xs text-blue-200">Points</div>
                                <div className="text-lg font-bold text-yellow-400">{points}</div>
                            </div>
                        </div>
                        
                        {isHailMary && (
                            <div className="bg-red-600 text-white text-center py-1 px-2 rounded text-xs font-bold mb-2">
                                âš¡ HAIL MARY ROUND âš¡
                            </div>
                        )}
                        
                        <div className="text-xs text-blue-200 text-center">
                            {gameState === 'ready' ? 'Spin to start a round!' : 
                             gameState === 'spinning' ? 'Spinning...' :
                             gameState === 'playing' ? 'Drag to reorder items!' :
                             gameState === 'finished' ? 'Round complete!' :
                             gameState === 'gameOver' ? 'Game Over!' : ''}
                        </div>
                    </div>

                    {/* Game Area */}
                    <div className="p-3">
                        {/* Spinner Section */}
                        {gameState === 'ready' && (
                            <div className="text-center mb-4">
                                <div className="mb-4">
                                    <h2 className="text-lg font-bold text-gray-800 mb-2">Ready to Spin?</h2>
                                    <p className="text-sm text-gray-600 mb-3">
                                        {isHailMary ? 
                                            "This is your last chance! Get all 5 items perfect to earn 30 points and continue." :
                                            "Each spin costs 10 points. Rank 5 items correctly to earn points back!"
                                        }
                                    </p>
                                </div>
                                
                                <button 
                                    onClick={spinWheel}
                                    disabled={!canSpin()}
                                    className={`w-full py-3 px-6 rounded-lg font-bold text-lg flex items-center justify-center space-x-2 ${
                                        canSpin() 
                                            ? 'bg-yellow-400 hover:bg-yellow-500 text-gray-900' 
                                            : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                    }`}
                                >
                                    <Zap />
                                    <span>{isHailMary ? 'Hail Mary Spin (FREE)' : `Spin Wheel (-10 pts)`}</span>
                                </button>
                            </div>
                        )}

                        {/* Slot Machine Spinner Animation */}
                        {gameState === 'spinning' && (
                            <div className="text-center mb-6">
                                <div className="mb-4">
                                    <div className="slot-container bg-white mx-auto w-64">
                                        <div 
                                            className="slot-reel"
                                            style={{
                                                transform: `translateY(-${selectedCategoryIndex * 120}px)`
                                            }}
                                        >
                                            {/* Create multiple sets of categories for the spinning effect */}
                                            {[...Array(3)].map((_, setIndex) => 
                                                Object.entries(gameCategories).map(([key, category], index) => (
                                                    <div 
                                                        key={`${setIndex}-${key}`}
                                                        className={`category-card bg-gradient-to-br from-blue-50 to-blue-100 ${
                                                            setIndex === 2 && index === selectedCategoryIndex ? 'selected' : ''
                                                        }`}
                                                    >
                                                        <div className="text-3xl mb-2">{category.icon}</div>
                                                        <div className="text-sm font-bold text-blue-900 text-center px-2">
                                                            {category.title}
                                                        </div>
                                                        <div className="text-xs text-blue-700 text-center px-2">
                                                            {category.description}
                                                        </div>
                                                    </div>
                                                ))
                                            )}
                                        </div>
                                        
                                        {/* Slot machine window indicator */}
                                        <div className="absolute inset-0 pointer-events-none">
                                            <div className="absolute top-1/2 left-0 right-0 h-0.5 bg-yellow-400 transform -translate-y-1/2"></div>
                                            <div className="absolute top-1/2 left-0 right-0 h-0.5 bg-yellow-400 transform translate-y-1/2"></div>
                                        </div>
                                    </div>
                                </div>
                                <div className="text-blue-900 font-bold">Spinning the slots...</div>
                            </div>
                        )}

                        {/* Selected Category Display */}
                        {currentCategory && gameState === 'playing' && (
                            <div className="mb-4">
                                <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-3 text-center">
                                    <div className="text-2xl mb-1">{gameCategories[currentCategory].icon}</div>
                                    <h3 className="font-bold text-blue-900">{gameCategories[currentCategory].title}</h3>
                                    <p className="text-sm text-blue-700">{gameCategories[currentCategory].description}</p>
                                </div>
                            </div>
                        )}

                        {/* Instructions */}
                        {gameState === 'playing' && (
                            <div className="mb-3 text-center">
                                <p className="text-xs text-gray-600">
                                    Top/Bottom: 10 pts â€¢ Middle: 5-15 pts â€¢ Perfect: +25 bonus
                                </p>
                            </div>
                        )}

                        {/* Items List */}
                        {items.length > 0 && (
                            <div className="space-y-1 mb-4">
                                {items.map((item, index) => {
                                    const result = showResults ? getItemResult(item, index) : null;
                                    return (
                                        <div 
                                            key={item.name} 
                                            data-item-index={index}
                                            className={`bg-white border-2 rounded-lg p-2 flex items-center justify-between drag-item item-entrance
                                                ${result ? result.color : 'border-gray-200 hover:border-blue-300'}
                                                ${dragOverIndex === index ? 'drag-over' : ''}`}
                                            style={{ animationDelay: `${index * 0.1}s` }}
                                            draggable={gameState === 'playing'}
                                            onDragStart={(e) => handleDragStart(e, index)}
                                            onDragEnd={handleDragEnd}
                                            onDragOver={handleDragOver}
                                            onDragEnter={(e) => handleDragEnter(e, index)}
                                            onDragLeave={handleDragLeave}
                                            onDrop={(e) => handleDrop(e, index)}
                                            onTouchStart={(e) => handleTouchStart(e, index)}
                                            onTouchMove={(e) => handleTouchMove(e, index)}
                                            onTouchEnd={(e) => handleTouchEnd(e, index)}
                                        >
                                            <div className="flex items-center space-x-2 flex-1">
                                                <div className="text-sm font-bold text-gray-500 w-5">#{index + 1}</div>
                                                <div className="flex-1">
                                                    <div className="text-sm font-medium leading-tight">{item.name}</div>
                                                    {showResults && (
                                                        <div className="text-xs text-gray-600 leading-none mt-1">
                                                            Correct: #{item.correctOrder}
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                            
                                            {gameState === 'playing' && (
                                                <div className="flex flex-col space-y-0.5 ml-2">
                                                    <button 
                                                        onClick={() => moveItemWithArrow(index, 'up')}
                                                        disabled={index === 0}
                                                        className="p-1.5 bg-blue-100 hover:bg-blue-200 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                                                        title="Move up"
                                                    >
                                                        <ChevronUp />
                                                    </button>
                                                    <button 
                                                        onClick={() => moveItemWithArrow(index, 'down')}
                                                        disabled={index === items.length - 1}
                                                        className="p-1.5 bg-blue-100 hover:bg-blue-200 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                                                        title="Move down"
                                                    >
                                                        <ChevronDown />
                                                    </button>
                                                </div>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                        {/* Action Buttons */}
                        <div className="space-y-2">
                            {gameState === 'playing' && (
                                <button 
                                    onClick={finishRound}
                                    className="w-full bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg font-semibold flex items-center justify-center space-x-2"
                                >
                                    <CheckCircle />
                                    <span>Submit Answer</span>
                                </button>
                            )}
                            
                            {gameState === 'finished' && (
                                <div className="text-center space-y-3">
                                    <div className="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-3">
                                        <div className="text-2xl font-bold text-yellow-600 mb-1">+{roundScore} points</div>
                                        
                                        {bonuses.map((bonus, idx) => (
                                            <div key={idx} className="text-sm text-green-600 font-medium">
                                                ðŸŽ‰ {bonus}
                                            </div>
                                        ))}
                                        
                                        <div className="text-sm text-gray-600 mt-2">
                                            {calculateScore().correctCount}/5 correct positions
                                        </div>
                                    </div>
                                    
                                    <button 
                                        onClick={nextRound}
                                        className="w-full bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg font-semibold"
                                    >
                                        Next Round
                                    </button>
                                </div>
                            )}

                            {gameState === 'gameOver' && (
                                <div className="text-center space-y-3">
                                    <div className="bg-red-50 border-2 border-red-200 rounded-lg p-4">
                                        <div className="text-2xl font-bold text-red-600 mb-2">Game Over!</div>
                                        <div className="text-sm text-gray-600 mb-3">
                                            You couldn't get all 5 items perfect in your Hail Mary round.
                                        </div>
                                        <div className="text-lg font-bold text-gray-800">Final Score: {points} points</div>
                                    </div>
                                    
                                    <button 
                                        onClick={resetGame}
                                        className="w-full bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg font-semibold"
                                    >
                                        Play Again
                                    </button>
                                </div>
                            )}

                            {gameState !== 'gameOver' && (
                                <button 
                                    onClick={resetGame}
                                    className="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 p-2 rounded-lg text-sm flex items-center justify-center space-x-2"
                                >
                                    <RotateCcw />
                                    <span>Reset Game</span>
                                </button>
                            )}
                        </div>

                        {/* Game Rules */}
                        {gameState === 'ready' && (
                            <div className="mt-6 bg-gray-50 rounded-lg p-3">
                                <h4 className="font-bold text-gray-800 mb-2">How to Play:</h4>
                                <ul className="text-xs text-gray-600 space-y-1">
                                    <li>â€¢ Start with 50 points</li>
                                    <li>â€¢ Each spin costs 10 points</li>
                                    <li>â€¢ Rank 5 items in correct order</li>
                                    <li>â€¢ Top/Bottom correct: 10 points</li>
                                    <li>â€¢ Middle correct: 5-15 points</li>
                                    <li>â€¢ All correct: +25 bonus</li>
                                    <li>â€¢ Under 10 points? Hail Mary round!</li>
                                </ul>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<RankRushGame />, document.getElementById('root'));
    </script>
</body>
</html>
