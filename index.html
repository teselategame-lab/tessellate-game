<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rank Rush - Tile Edition</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            overflow-x: hidden;
            background: #ffffff;
            height: 100vh;
            height: 100dvh;
        }
        
        .game-container {
            height: 100vh;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            max-height: 100vh;
            max-height: 100dvh;
        }
        
        .game-content {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
            display: flex;
            flex-direction: column;
            padding-bottom: 20px;
        }
        
        * {
            touch-action: manipulation;
        }

        .slot-container {
            overflow: hidden;
            height: 100px;
            position: relative;
            border-radius: 8px;
            border: 2px solid #1e40af;
        }
        
        .slot-reel {
            animation: slotSpin 3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        .category-card {
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .category-card:last-child {
            border-bottom: none;
        }
        
        .category-card.selected {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.3);
            border-bottom-color: #d97706;
        }
        
        @keyframes slotSpin {
            0% { transform: translateY(0); }
            100% { transform: translateY(-100%); }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .item-entrance {
            animation: slideInUp 0.4s ease forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const RotateCcw = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M1 4v6h6"></path>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
        );
        
        const CheckCircle = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22,4 12,14.01 9,11.01"></polyline>
            </svg>
        );

        const Zap = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="13,2 3,14 12,14 11,22 21,10 12,10 13,2"></polygon>
            </svg>
        );

        const gameCategories = {
            planetsByDistance: {
                title: "Planets by Distance from Sun",
                description: "Closest to farthest",
                icon: "ü™ê",
                items: [
                    { name: "Mercury", value: 1 },
                    { name: "Venus", value: 2 },
                    { name: "Earth", value: 3 },
                    { name: "Mars", value: 4 },
                    { name: "Jupiter", value: 5 },
                    { name: "Saturn", value: 6 },
                    { name: "Uranus", value: 7 },
                    { name: "Neptune", value: 8 }
                ]
            },
            countriesByPopulation: {
                title: "Countries by Population",
                description: "Most to least populated",
                icon: "üåç",
                items: [
                    { name: "China", value: 1412000000 },
                    { name: "India", value: 1408000000 },
                    { name: "United States", value: 333000000 },
                    { name: "Indonesia", value: 275000000 },
                    { name: "Pakistan", value: 231000000 },
                    { name: "Nigeria", value: 218000000 },
                    { name: "Brazil", value: 215000000 },
                    { name: "Bangladesh", value: 169000000 },
                    { name: "Russia", value: 146000000 },
                    { name: "Mexico", value: 128000000 },
                    { name: "Ethiopia", value: 120000000 },
                    { name: "Japan", value: 125000000 },
                    { name: "Philippines", value: 110000000 },
                    { name: "Egypt", value: 104000000 },
                    { name: "Vietnam", value: 97000000 },
                    { name: "Turkey", value: 84000000 },
                    { name: "Iran", value: 84000000 },
                    { name: "Germany", value: 83000000 }
                ]
            },
            moviesByBoxOffice: {
                title: "Movies by Box Office",
                description: "Highest to lowest grossing",
                icon: "üé¨",
                items: [
                    { name: "Avatar (2009)", value: 2923706026 },
                    { name: "Avengers: Endgame", value: 2797501328 },
                    { name: "Avatar: The Way of Water", value: 2320250281 },
                    { name: "Titanic", value: 2257844554 },
                    { name: "Star Wars: The Force Awakens", value: 2071310218 },
                    { name: "Avengers: Infinity War", value: 2048359754 },
                    { name: "Spider-Man: No Way Home", value: 1921847111 },
                    { name: "Jurassic World", value: 1672319444 },
                    { name: "The Lion King (2019)", value: 1656943394 },
                    { name: "The Avengers", value: 1518815515 },
                    { name: "Furious 7", value: 1515341399 },
                    { name: "Top Gun: Maverick", value: 1488732821 }
                ]
            },
            stocksByMarketCap: {
                title: "Companies by Market Cap",
                description: "Most to least valuable",
                icon: "üíº",
                items: [
                    { name: "Microsoft", value: 3000000000000 },
                    { name: "Apple", value: 2900000000000 },
                    { name: "Nvidia", value: 2200000000000 },
                    { name: "Alphabet (Google)", value: 2000000000000 },
                    { name: "Amazon", value: 1500000000000 },
                    { name: "Meta (Facebook)", value: 1200000000000 },
                    { name: "Tesla", value: 800000000000 },
                    { name: "Berkshire Hathaway", value: 780000000000 },
                    { name: "Taiwan Semiconductor", value: 500000000000 },
                    { name: "Walmart", value: 480000000000 }
                ]
            },
            fastFoodChains: {
                title: "Fast Food by Revenue",
                description: "Highest to lowest revenue",
                icon: "üçî",
                items: [
                    { name: "Starbucks", value: 32250000000 },
                    { name: "KFC", value: 27000000000 },
                    { name: "McDonald's", value: 23223000000 },
                    { name: "Domino's", value: 17800000000 },
                    { name: "Subway", value: 16100000000 },
                    { name: "Pizza Hut", value: 12000000000 },
                    { name: "Taco Bell", value: 11300000000 },
                    { name: "Burger King", value: 10200000000 },
                    { name: "Dunkin'", value: 9200000000 }
                ]
            }
        };

        const RankRushGame = () => {
            const [currentCategory, setCurrentCategory] = useState(null);
            const [items, setItems] = useState([]);
            const [gameState, setGameState] = useState('ready');
            const [currentScore, setCurrentScore] = useState(0);
            const [currentRound, setCurrentRound] = useState(1);
            const [strikes, setStrikes] = useState(0);
            const [peekPowerUps, setPeekPowerUps] = useState(0);
            const [revealedPositions, setRevealedPositions] = useState([]);
            const [roundScore, setRoundScore] = useState(0);
            const [showResults, setShowResults] = useState(false);
            const [bonuses, setBonuses] = useState([]);
            const [selectedCategoryIndex, setSelectedCategoryIndex] = useState(0);
            const [highScore, setHighScore] = useState(0);
            const [isFinaleRound, setIsFinaleRound] = useState(false);
            const [userSelections, setUserSelections] = useState([]);

            const tileColors = [
                'bg-purple-200 border-purple-400 text-purple-800',
                'bg-blue-200 border-blue-400 text-blue-800', 
                'bg-green-200 border-green-400 text-green-800',
                'bg-yellow-200 border-yellow-400 text-yellow-800',
                'bg-pink-200 border-pink-400 text-pink-800'
            ];

            useEffect(() => {
                const savedHighScore = parseInt(window.sessionStorage?.getItem?.('rankRushHighScore') || '0');
                setHighScore(savedHighScore);
            }, []);

            const saveHighScore = (score) => {
                if (score > highScore) {
                    setHighScore(score);
                    try {
                        window.sessionStorage?.setItem?.('rankRushHighScore', score.toString());
                    } catch (error) {
                        console.log('Could not save to sessionStorage');
                    }
                }
            };

            const spinWheel = () => {
                if (currentRound === 8) {
                    setIsFinaleRound(true);
                }
                setGameState('spinning');
                startSpinAnimation();
            };

            const startSpinAnimation = () => {
                const categoryKeys = Object.keys(gameCategories);
                const finalCategoryIndex = Math.floor(Math.random() * categoryKeys.length);
                const finalCategory = categoryKeys[finalCategoryIndex];
                
                setSelectedCategoryIndex(finalCategoryIndex);
                
                setTimeout(() => {
                    setCurrentCategory(finalCategory);
                    initializeRound(finalCategory);
                }, 3000);
            };

            const initializeRound = (categoryKey) => {
                const category = gameCategories[categoryKey];
                
                const shuffledItems = [...category.items].sort(() => Math.random() - 0.5);
                const selectedItems = shuffledItems.slice(0, 5);
                
                const isDescending = [
                    'countriesByPopulation', 'moviesByBoxOffice', 'stocksByMarketCap',
                    'fastFoodChains', 'oceansByDepth', 'spicesByHeat', 'usStatesByArea'
                ].includes(categoryKey);
                
                const sortedItems = [...selectedItems].sort((a, b) => {
                    return isDescending ? b.value - a.value : a.value - b.value;
                });
                
                const itemsWithOrder = sortedItems.map((item, index) => ({
                    ...item,
                    correctOrder: index + 1
                }));
                
                const shuffledForDisplay = [...itemsWithOrder].sort(() => Math.random() - 0.5);
                
                setItems(shuffledForDisplay);
                setGameState('playing');
                setRoundScore(0);
                setShowResults(false);
                setBonuses([]);
                setRevealedPositions([]);
                setUserSelections([]);
            };

            const handleTileClick = (itemIndex) => {
                if (gameState !== 'playing') return;
                
                const existingSelectionIndex = userSelections.findIndex(sel => sel.itemIndex === itemIndex);
                
                if (existingSelectionIndex !== -1) {
                    return;
                }
                
                if (userSelections.length >= 5) {
                    return;
                }
                
                const newSelection = {
                    itemIndex,
                    position: userSelections.length + 1
                };
                
                setUserSelections([...userSelections, newSelection]);
                
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
            };

            const resetSelections = () => {
                setUserSelections([]);
                if (navigator.vibrate) {
                    navigator.vibrate(100);
                }
            };

            const getTileAppearance = (itemIndex) => {
                const selection = userSelections.find(sel => sel.itemIndex === itemIndex);
                if (selection) {
                    return {
                        selected: true,
                        position: selection.position,
                        colorClass: tileColors[selection.position - 1]
                    };
                }
                return {
                    selected: false,
                    position: null,
                    colorClass: 'bg-gray-100 border-gray-300 text-gray-800 hover:bg-gray-200'
                };
            };

            const calculateScore = () => {
                let score = 0;
                let earnedBonuses = [];
                let correctPositions = 0;
                
                const orderedItems = [];
                for (let pos = 1; pos <= 5; pos++) {
                    const selection = userSelections.find(sel => sel.position === pos);
                    if (selection) {
                        orderedItems.push(items[selection.itemIndex]);
                    }
                }
                
                orderedItems.forEach((item, index) => {
                    const currentPos = index + 1;
                    const correctPos = item.correctOrder;
                    
                    if (currentPos === correctPos) {
                        correctPositions++;
                        
                        if (correctPos === 1 || correctPos === 5) {
                            score += 10;
                            earnedBonuses.push(correctPos === 1 ? 'Top Position! +10' : 'Bottom Position! +10');
                        } else {
                            const middlePoints = 5 + Math.floor(Math.random() * 4);
                            score += middlePoints;
                            earnedBonuses.push(`Middle Position! +${middlePoints}`);
                        }
                    }
                });
                
                if (correctPositions === 5) {
                    score += 15;
                    earnedBonuses.push('Perfect Round! +15');
                    
                    if (peekPowerUps === 0) {
                        setPeekPowerUps(1);
                        earnedBonuses.push('üîç Peek Power-Up Earned!');
                    }
                }
                
                if (isFinaleRound && correctPositions === 5) {
                    const totalGameScore = currentScore + score;
                    score = totalGameScore;
                    earnedBonuses.push('üéâ FINALE BONUS: SCORE DOUBLED!');
                }
                
                return { score, bonuses: earnedBonuses, correctCount: correctPositions };
            };

            const finishRound = () => {
                const result = calculateScore();
                setRoundScore(result.score);
                setBonuses(result.bonuses);
                
                const isStrike = result.correctCount <= 1;
                if (isStrike) {
                    setStrikes(strikes + 1);
                }
                
                setCurrentScore(currentScore + result.score);
                
                if (strikes + (isStrike ? 1 : 0) >= 3) {
                    saveHighScore(currentScore + result.score);
                    setGameState('gameOver');
                } else if (currentRound >= 8) {
                    saveHighScore(currentScore + result.score);
                    setGameState('gameOver');
                } else {
                    setGameState('finished');
                }
                
                setShowResults(true);
            };

            const nextRound = () => {
                setCurrentRound(currentRound + 1);
                setRevealedPositions([]);
                setGameState('ready');
                setCurrentCategory(null);
                setItems([]);
                setShowResults(false);
                setUserSelections([]);
            };

            const usePeekPowerUp = () => {
                if (peekPowerUps > 0 && revealedPositions.length === 0) {
                    const correctItems = [];
                    items.forEach((item, itemIndex) => {
                        correctItems.push({ itemIndex, correctOrder: item.correctOrder });
                    });
                    
                    const shuffled = correctItems.sort(() => Math.random() - 0.5);
                    const toReveal = shuffled.slice(0, 2).map(item => item.itemIndex);
                    
                    setRevealedPositions(toReveal);
                    setPeekPowerUps(0);
                }
            };

            const resetGame = () => {
                setCurrentScore(0);
                setCurrentRound(1);
                setStrikes(0);
                setPeekPowerUps(0);
                setRevealedPositions([]);
                setIsFinaleRound(false);
                setGameState('ready');
                setCurrentCategory(null);
                setItems([]);
                setShowResults(false);
                setRoundScore(0);
                setBonuses([]);
                setUserSelections([]);
            };

            const canSpin = () => {
                return gameState === 'ready' && currentRound <= 8 && strikes < 3;
            };

            const canSubmit = () => {
                return gameState === 'playing' && userSelections.length === 5;
            };

            return (
                <div className="game-container max-w-xs mx-auto bg-white text-gray-900">
                    <div className="bg-gradient-to-r from-blue-900 to-blue-800 text-white p-1.5">
                        <div className="flex justify-between items-center mb-1">
                            <h1 className="text-base font-bold">Rank Rush</h1>
                            <div className="text-right">
                                <div className="text-xs text-blue-200">Score</div>
                                <div className="text-sm font-bold text-yellow-400">{currentScore}</div>
                            </div>
                        </div>
                        
                        <div className="flex justify-between items-center text-xs text-blue-200 mb-1">
                            <span>Round {currentRound}/8</span>
                            <span>High: {highScore}</span>
                        </div>
                        
                        <div className="flex justify-between items-center mb-1">
                            <div className="flex items-center space-x-1">
                                <span className="text-xs text-blue-200">Strikes:</span>
                                {[...Array(3)].map((_, i) => (
                                    <span key={i} className={`text-xs ${i < strikes ? 'text-red-400' : 'text-gray-500'}`}>
                                        ‚ùå
                                    </span>
                                ))}
                            </div>
                            
                            {peekPowerUps > 0 && gameState === 'playing' && (
                                <button 
                                    onClick={usePeekPowerUp}
                                    className="bg-yellow-500 hover:bg-yellow-600 text-black px-1.5 py-0.5 rounded text-xs font-bold"
                                >
                                    üîç Peek
                                </button>
                            )}
                        </div>
                        
                        {isFinaleRound && (
                            <div className="bg-yellow-600 text-black text-center py-0.5 px-2 rounded text-xs font-bold mb-1">
                                üèÜ FINALE - Get all 5 to DOUBLE score! üèÜ
                            </div>
                        )}
                        
                        <div className="text-xs text-blue-200 text-center">
                            {gameState === 'ready' ? (currentRound === 1 ? 'Start challenge!' : 'Ready!') : 
                             gameState === 'spinning' ? 'Spinning...' :
                             gameState === 'playing' ? 'Click tiles in order!' :
                             gameState === 'finished' ? 'Complete!' :
                             gameState === 'gameOver' ? 'Game Over!' : ''}
                        </div>
                    </div>

                    <div className="game-content">
                        {gameState === 'ready' && (
                            <div className="text-center mb-3">
                                <div className="mb-3">
                                    <h2 className="text-base font-bold text-gray-800 mb-1">Ready to Spin?</h2>
                                    <p className="text-xs text-gray-600 mb-2">
                                        Rank 5 items correctly to earn points!
                                    </p>
                                </div>
                                
                                <button 
                                    onClick={spinWheel}
                                    disabled={!canSpin()}
                                    className={`w-full py-2 px-4 rounded-lg font-bold text-base flex items-center justify-center space-x-2 ${
                                        canSpin() 
                                            ? 'bg-yellow-400 hover:bg-yellow-500 text-gray-900' 
                                            : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                    }`}
                                >
                                    <Zap />
                                    <span>Spin Wheel</span>
                                </button>
                            </div>
                        )}

                        {gameState === 'spinning' && (
                            <div className="text-center mb-4">
                                <div className="mb-3">
                                    <div className="slot-container bg-white mx-auto w-56">
                                        <div 
                                            className="slot-reel"
                                            style={{
                                                transform: `translateY(-${selectedCategoryIndex * 100}px)`
                                            }}
                                        >
                                            {[...Array(3)].map((_, setIndex) => 
                                                Object.entries(gameCategories).map(([key, category], index) => (
                                                    <div 
                                                        key={`${setIndex}-${key}`}
                                                        className={`category-card bg-gradient-to-br from-blue-50 to-blue-100 ${
                                                            setIndex === 2 && index === selectedCategoryIndex ? 'selected' : ''
                                                        }`}
                                                    >
                                                        <div className="text-2xl mb-1">{category.icon}</div>
                                                        <div className="text-xs font-bold text-blue-900 text-center px-2">
                                                            {category.title}
                                                        </div>
                                                        <div className="text-xs text-blue-700 text-center px-2">
                                                            {category.description}
                                                        </div>
                                                    </div>
                                                ))
                                            )}
                                        </div>
                                        
                                        <div className="absolute inset-0 pointer-events-none">
                                            <div className="absolute top-1/2 left-0 right-0 h-0.5 bg-yellow-400 transform -translate-y-1/2"></div>
                                            <div className="absolute top-1/2 left-0 right-0 h-0.5 bg-yellow-400 transform translate-y-1/2"></div>
                                        </div>
                                    </div>
                                </div>
                                <div className="text-sm text-blue-900 font-bold">Spinning...</div>
                            </div>
                        )}

                        {currentCategory && gameState === 'playing' && (
                            <div className="mb-3">
                                <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-2 text-center">
                                    <div className="text-xl mb-1">{gameCategories[currentCategory].icon}</div>
                                    <h3 className="text-sm font-bold text-blue-900">{gameCategories[currentCategory].title}</h3>
                                    <p className="text-xs text-blue-700">{gameCategories[currentCategory].description}</p>
                                </div>
                            </div>
                        )}

                        {gameState === 'playing' && (
                            <div className="mb-2 text-center">
                                <p className="text-xs text-gray-600">
                                    {userSelections.length === 0 ? 'Tap tiles in order: 1st, 2nd, 3rd...' : 
                                     userSelections.length < 5 ? `Selected ${userSelections.length}/5 - keep going!` :
                                     'All selected! Ready to submit.'}
                                </p>
                                {revealedPositions.length > 0 && (
                                    <p className="text-xs text-green-600 font-bold mt-1">
                                        üîç Peek active - 2 items revealed!
                                    </p>
                                )}
                            </div>
                        )}

                        {items.length > 0 && (
                            <div className="mb-4">
                                <div className="grid grid-cols-5 gap-1">
                                    {items.map((item, index) => {
                                        const tileAppearance = getTileAppearance(index);
                                        const isRevealed = revealedPositions.includes(index);
                                        
                                        return (
                                            <button
                                                key={item.name}
                                                onClick={() => handleTileClick(index)}
                                                disabled={gameState !== 'playing'}
                                                className={`
                                                    relative p-2 rounded-lg border-2 text-xs font-medium leading-tight transition-all duration-200
                                                    ${tileAppearance.colorClass}
                                                    ${gameState === 'playing' ? 'cursor-pointer active:scale-95' : 'cursor-default'}
                                                    ${isRevealed ? 'ring-2 ring-green-400 ring-opacity-50' : ''}
                                                    min-h-[60px] flex flex-col items-center justify-center
                                                `}
                                                style={{ 
                                                    animationDelay: `${index * 0.1}s`,
                                                    touchAction: 'manipulation'
                                                }}
                                            >
                                                {tileAppearance.selected && (
                                                    <div className="absolute -top-1 -right-1 w-5 h-5 bg-white border-2 border-current rounded-full flex items-center justify-center text-xs font-bold">
                                                        {tileAppearance.position}
                                                    </div>
                                                )}
                                                
                                                {isRevealed && !showResults && (
                                                    <div className="absolute -top-1 -left-1 text-green-600 text-sm">
                                                        üîç
                                                    </div>
                                                )}
                                                
                                                <div className="text-center">
                                                    {item.name}
                                                </div>
                                                
                                                {showResults && (
                                                    <div className="text-xs opacity-75 mt-1">
                                                        Should be #{item.correctOrder}
                                                    </div>
                                                )}
                                            </button>
                                        );
                                    })}
                                </div>
                                
                                {gameState === 'playing' && userSelections.length > 0 && (
                                    <div className="text-center mt-2">
                                        <button
                                            onClick={resetSelections}
                                            className="bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1 rounded text-xs font-medium"
                                        >
                                            Reset Selections
                                        </button>
                                    </div>
                                )}
                            </div>
                        )}

                        {gameState === 'finished' && (
                            <div className="text-center space-y-2 mb-3">
                                <div className="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-2">
                                    <div className="text-lg font-bold text-yellow-600 mb-1">+{roundScore} points</div>
                                    
                                    {bonuses.map((bonus, idx) => (
                                        <div key={idx} className="text-xs text-green-600 font-medium">
                                            üéâ {bonus}
                                        </div>
                                    ))}
                                    
                                    <div className="text-xs text-gray-600 mt-1">
                                        {calculateScore().correctCount}/5 correct
                                        {calculateScore().correctCount <= 1 && (
                                            <div className="text-red-600 font-bold">‚ö†Ô∏è Strike {strikes + 1}/3</div>
                                        )}
                                    </div>
                                </div>
                                
                                <button 
                                    onClick={nextRound}
                                    className="w-full bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg font-semibold"
                                >
                                    {currentRound >= 8 ? 'Final Score' : 'Next Round'}
                                </button>
                            </div>
                        )}

                        <div className="space-y-3 mt-auto">
                            {gameState === 'playing' && (
                                <button 
                                    onClick={finishRound}
                                    disabled={!canSubmit()}
                                    className={`w-full p-4 rounded-lg font-bold text-lg flex items-center justify-center space-x-2 transition-all
                                        ${canSubmit() 
                                            ? 'bg-green-600 hover:bg-green-700 text-white shadow-lg' 
                                            : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                        }`}
                                >
                                    <CheckCircle />
                                    <span>{canSubmit() ? 'Submit Answer' : `Select ${5 - userSelections.length} more`}</span>
                                </button>
                            )}
                            
                            {gameState === 'gameOver' && (
                                <div className="text-center space-y-2">
                                    <div className="bg-gradient-to-br from-purple-50 to-blue-50 border-2 border-purple-200 rounded-lg p-3">
                                        <div className="text-lg font-bold text-purple-600 mb-1">
                                            {currentRound >= 8 ? 'üèÜ Complete!' : 'üí• Game Over!'}
                                        </div>
                                        
                                        <div className="text-base font-bold text-gray-800 mb-1">
                                            Final Score: {currentScore}
                                        </div>
                                        
                                        {currentScore > highScore ? (
                                            <div className="text-green-600 font-bold text-sm mb-1">
                                                üéâ NEW HIGH SCORE! üéâ
                                            </div>
                                        ) : highScore > 0 && (
                                            <div className="text-gray-600 text-sm mb-1">
                                                High Score: {highScore}
                                            </div>
                                        )}
                                        
                                        <div className="text-xs text-gray-600">
                                            {currentRound >= 8 ? 
                                                `Completed 8 rounds with ${strikes} strikes` :
                                                `Round ${currentRound} - 3 strikes`
                                            }
                                        </div>
                                    </div>
                                    
                                    <button 
                                        onClick={resetGame}
                                        className="w-full bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg font-semibold"
                                    >
                                        Play Again
                                    </button>
                                </div>
                            )}

                            {gameState !== 'gameOver' && gameState !== 'ready' && gameState !== 'playing' && (
                                <button 
                                    onClick={resetGame}
                                    className="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 p-2 rounded-lg text-sm flex items-center justify-center space-x-2"
                                >
                                    <RotateCcw />
                                    <span>Reset</span>
                                </button>
                            )}
                        </div>

                        {gameState === 'ready' && currentRound === 1 && (
                            <div className="mt-3 bg-gray-50 rounded-lg p-2">
                                <h4 className="text-sm font-bold text-gray-800 mb-1">How to Play:</h4>
                                <ul className="text-xs text-gray-600 space-y-0.5">
                                    <li>‚Ä¢ Tap tiles in ranking order (1st, 2nd, 3rd...)</li>
                                    <li>‚Ä¢ 8 rounds to build score</li>
                                    <li>‚Ä¢ 3 strikes (0-1 correct) = game over</li>
                                    <li>‚Ä¢ Perfect: +15 bonus + Peek power-up</li>
                                    <li>‚Ä¢ Round 8: Perfect = double score!</li>
                                </ul>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<RankRushGame />, document.getElementById('root'));
    </script>
</body>
</html>
